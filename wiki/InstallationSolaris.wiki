#summary Installation instructions for BibApp on Solaris

Instructions for building a bibapp "zone".

=Unix Environment=

==Directory layout==

The BIBAPP root is /bibapp.

/bibapp/

    __build__/: directory containing source and notes to rebuild the environment from scratch
    source/: source packages for installed software, libraries, etc.
    notes/: notes, copies of build process
    logs/: all application and script logs

    jdk/: the Java JDK(s)

    ruby/: the Ruby environment

    apache/: Apache webserver

    apache/content/: Apache document root

For each toolkit or application installed, there will be a sub-directory for each installed version of the software package. For example: the active Apache directory tree will be /bibapp/apache/apache-2.2.11.

=Tools/Servers/Applications installed=

==Programming languages/toolkits==

===Java JDK===

Java 1.6.0_16 (/bibapp/jdk/jdk-1.6.0_16)
    This is the Java installation to be used for the bibapp application. Please do not use any other java installations you may find on the host.

Java install notes:

  # Get the JDK from Sun source, unpack:
    * mkdir /bibapp/__build__/source/jdk/jdk-6u16; cd /bibapp/__build__/source/jdk/jdk-6u16
    * Download, then sftp to SWAPP jdk-6u16-solaris-sparc.sh
    * Download, then sftp to SWAPP jdk-6u16-solaris-sparcv9.sh
    * chmod +x `jdk-6u16-solaris-sparc*.sh`
    * cd /bibapp/jdk
    * /bibapp/__build__/source/jdk/jdk-6u16/jdk-6u16-solaris-sparc.sh
    * /bibapp/__build__/source/jdk/jdk-6u16/jdk-6u16-solaris-sparcv9.sh
  # Configure the JDK environment
    * Add JAVA_HOME to ~bibappadm/.profile, modify the PATH:

                    JAVA_HOME=/bibapp-qa/jdk/jdk-1.6.0_16
                    export JAVA_HOME
                    PATH=$JAVA_HOME/bin:$PATH
                    export PATH
                  
===Ruby===

Ruby Enterprise Edition 1.8.6 (/bibapp/ruby/ruby-enterprise-1.8.6)
    This is the Ruby installation to be used for the bibapp ruby-on-rails application. Will contain installed third party modules.
    BibApp uses the Apache + Passenger stack to serve pages
    The BibApp application is deployed to /bibapp/ruby/bibapp/ 

Ruby install notes:

  # Get Ruby, unpack:
    * $ mkdir /bibapp/ruby
    * $ mkdir /bibapp/logs/ruby
    * $ cd /bibapp/__build__/source
    * $ mkdir ruby; cd ruby
    * $ wget ftp://ftp.ruby-lang.org/pub/ruby/ruby-1.8.6-p383.tar.gz
    * $ tar xvfz ruby-1.8.6-p383.tar.gz
    * $ cd ruby-1.8.6-p383
  # Compile, make, make install:
    * $ ./configure --prefix=/bibapp/ruby/ruby-1.8.6-p383 --enable-pthread
    * $ cd ext/openssl
    * $ ruby extconf.rb --with-openssl-dir=/usr/sfw
    * $ cd ../..
    * $ make
    * $ make test
    * $ make install
  # Configure the Ruby environment:
    * Add RUBY_HOME to ~bibappadm/.profile, modify the PATH:

                    RUBY_HOME=/bibapp-qa/ruby/ruby-1.8.6
                    export RUBY_HOME
                    PATH=$RUBY_HOME/bin:$PATH
                    export PATH
                  

          * $ . ~/.profile
  # Get Ruby Enterprise Edition, unpack:
    * $ cd /bibapp/__build__/source/ruby
    * $ wget http://rubyforge.org/frs/download.php/58677/ruby-enterprise-1.8.6-20090610.tar.gz
    * $ tar xvfz ruby-enterprise-1.8.6-20090610.tar.gz
    * $ cd ruby-enterprise-1.8.6-20090610
  # Install Ruby Enterprise Edition:
    * $ cd /bibapp/__build__/source/ruby
    * $ export CFLAGS="-I/usr/sfw/include"
    * $ ./ruby-enterprise-1.8.6-20090610/installer
    * Where would you like to install Ruby Enterprise Edition to?
      * [/opt/ruby-enterprise-1.8.6-20090610] : /bibapp-qa/ruby/ruby-enterprise-1.8.6-20090610
  # Configure the Ruby Enterprise Edition environment, overriding the base ruby install performed earlier:
    * Edit ~/.profile:

                      RUBY_HOME=/bibapp-qa/ruby/ruby-enterprise-1.8.6-20090610
                      export RUBY_HOME
                      PATH=$RUBY_HOME/bin:$PATH
                      export PATH
                    

    * $ unset PATH
    * $ . ~/.profile


===Apache===

Apache 2.2.13 webserver (/bibapp/apache/apache-2.2.13)
    The Apache webserver is the semi-public face of the bibapp. as well as static HTML. 
    The webserver contains the basic set of modules, plus mod_ssl, mod_proxy*, and mod_rewrite.

Apache install notes